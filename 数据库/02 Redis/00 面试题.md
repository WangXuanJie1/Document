## 什么是 Redis？它主要用来什么的？
1. Redis是一个基于Key-Value存储结构的Nosql开源内存数据库。 它提供了5种常用的数据类型，String、Map、Set、ZSet、List。

## 说说 Redis 的基本数据结构类型
String（字符串） , Hash（哈希） , List（列表） , Set（集合） zset（有序集合）

复用是指复用一个或多个线程资源。IO多路复用意思就是说，一个或多个线程处理多个 TCP 连 接。尽可能地减少系统开销，无需创建和维护过多的进程/线程。
1. epoll_create()函数，在系统启动时，会在Linux内核里面申请一个B+树结构的文件系统， 然后，返回epoll对象，也是一个FD。
2. epoll_ctl()函数，每新建一个连接的时候，会同步更新epoll对象中的FD，并且绑定一个 callback回调函数。
3. epoll_wait()函数，轮询所有的callback集合，并触发对应的 IO 操作
select 
poll 
epoll

## 缓存穿透：每次查询都是走的数据库，就是没有这个值。添加默认缓存，设置过期时间
## 缓存雪崩：指缓存中数据大批量到过期时间，而查询数据量巨大，请求都直接 访问数据库，引起数据库压力过大甚至 down 机
## 缓存击穿：指热点key 在某个时间点过期✁时候，而恰好在这个时间点对这个 Key有大量的并发请求过来，从而大量的请求打到 db。设置热点数据永不过期

## Redis 的过期策略
1. 定时过期： 每个设置过期时间的 key 都需要创一个定时器，到过期时间就会立即对 key 进行清除。该策略可以立即清除过期的数据，对内存很友好；但是会占用大量✁ CPU 资源去处理过期的数据，从而影响缓存的响应时间和吞吐量。
2. 有当访问一个 key 时，才会判断该 key 是否已过期，过期则清除。该策略可 以最大化地节省 CPU资源，却对内存非常不友好。极端情况可能出现大量✁过期key 没有再次被访问，从而不会被清除，占用大量内存。
3. 每隔一定✁时间，会扫描一定数量✁数据库✁ expires 字典中一定数量✁ key，并清除其中已过期✁ key。该策略是前两者✁一个折中方案。通过调整定 时扫描✁时间间隔和每次扫描✁限定耗时，可以在不同情况下使得 CPU 和内存资源达到最优✁平衡效果。
 volatile-lru：当内存不足以容纳新写入数据时，从设置了过期时间✁ key 中 使用LRU（最近最少使用）算法进行淘汰；
 allkeys-lru：当内存不足以容纳新写入数据时，从所有 key 中使用 LRU（最近 最少使用）算法进行淘汰。
 volatile-lfu：4.0 版本新增，当内存不足以容纳新写入数据时，在过期✁ key 中，使用 LFU 算法进行删除 key。
 allkeys-lfu：4.0 版本新增，当内存不足以容纳新写入数据时，从所有 key 中 使用LFU算法进行淘汰；
 volatile-random：当内存不足以容纳新写入数据时，从设置了过期时间✁ key中，随机淘汰数据；。
 allkeys-random：当内存不足以容纳新写入数据时，从所有 key 中随机淘汰 数据。
 volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间✁ key 中， 根据过期时间进行淘汰，越早过期✁优先被淘汰；
 noeviction：默认策略，当内存不足以容纳新写入数据时，新写入操作会报错。

## 如何选择RDB和AOF
1. 如果数据不能丢失，RDB 和AOF 混用 
2. 如果只作为缓存使用，可以承受几分钟✁数据丢失✁话，可以只使用 RDB。
3. 如果只使用 AOF，优先使用 everysec ✁写回策略。

## Redis 主从同步包括三个阶段。
1. 第一阶段：主从库间✁立连接、协商同步。主库收到 psync 命令后,响应 FULLRESYNC 命令（它表示第一次复制采用✁是全 量复制），并带上主库 runID和主库目前✁复制进度 offset。
2. 第二阶段：主库把数据同步到从库，从库收到数据后，完成本地加载。
3. 第三阶段，主库把新写✁命令，发送到从库。

## 2.16 聊聊 Redis 事务机制
1. Redis 通过 MULTI、EXEC、WATCH 等一组命令集合，来实现事务机制。 事务支持一次执行多个命令，一个事务中所有命令都会被序列化

# hash冲突
1. 开放寻址法，包含线性探测、平方探测等等，就是从发生冲突的那个位置开始，按照一定的次序从 hash表中找到一个空闲的位置，然后把发生冲突的元素存入到这个空闲位置中
2. .链式寻址法，这是一种非常常见的方法，简单理解就是把存在hash冲突的key，以单向链表的方式 来存储
3. 再hash法，就是当通过某个hash函数计算的key存在冲突时，再用另外一个hash函数对这个key做
4. 建立公共溢出区， 就是把hash表分为基本表和溢出表两个部分，凡事存在冲突的元素，一律放入 到溢出表中。

## 在生成 RDB 期间，Redis 可以同时处理写请求么？ 可以✁，Redis 提供两个指令生成 RDB，分别✁ save 和bgsave。
1. 如果✁ save 指令，会阻塞，因为✁主线程执行✁。  如果✁ bgsave 指令，✁ fork 一个子进程来写入 RDB 文件✁，快照持久化完全交
给子进程来处理，父进程则可以继续处理客户端✁请求。

## Redis 底层，使用✁什么协议





