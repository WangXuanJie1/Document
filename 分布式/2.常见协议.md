### CAP理论,一致性,可用性, 分区容错性
1. 一致性（Consistency）：所有节点在同一时间的数据视图是相同的。(数据一致)
2. 可用性（Availability）：系统必须对用户请求做出响应，即使某些节点出现故障或网络分区。(避免节点故障,产生选举,可用)
3. 分区容错性（Partition Tolerance）：系统能够在网络分区的情况下继续工作。(在网络出现错误的时候)数据必须可以访问,节点失去信号,硬件错误

### BASE理论   基本可用,软状态,最终一致性
1. 基本可用: 系统出现故障但是基本可用,响应时间损失(接口时间长),功能的损失(高并发,服务降级)
2. 软状态: 相对于原子性,多个节点数据是一致的,软状态是允许存在中间状态,不会对可用性影响,存在数据延迟
3. 最终一致性: 不可能一直是软状态,时间期限之后所有都是一致的

### 2pc协议
1. 准备阶段协调者向参与者发送请求,等待参与者的响应,执行事物操作
2. 提交阶段,协调者根据参与者的状态是提交还是终止事务,所有返回这都返回提交状态,协调者会发送提交请求给所有参与者；如果有任何一个参与者返回中止状态，协调者会发送中止请求给所有参与者。
3. 2PC协议的关键是保证所有参与者在决策之前都达到一致的准备状态。然而，2PC协议存在一些问题，如单点故障、协调者失效等情况下可能导致系统长时间阻塞。为了解决这些问题，还有其他的协议如3PC协议、Paxos协议等被提出。

### 3pc
分布式系统中的数据一致性是指多个节点在进行共享数据操作时，保证数据的正确和完整。
在分布式环境下，由于节点之间的通信延迟、网络故障等原因，常常会出现数据不一致的情况。而解决数据一致性问题是分布式系统设计中的一个关键挑战。
1. 预提交（CanCommit）：协调者向参与者发送预提交请求，询问参与者是否可以提交事务，并等待参与者的响应。如果所有参与者都认为可以提交，进入下一阶段；否则，回滚事务。
2. 正式提交（PreCommit）：协调者向参与者发送正式提交请求，并等待参与者的响应。参与者再次确认是否可以提交事务，如果可以，将数据持久化，并向协调者发送“同意”响应；否则，回滚事务。
3. 提交（Commit）：协调者根据参与者的响应情况决定是否提交事务。如果所有的参与者都发送了“同意”响应，协调者发送提交请求给所有参与者，完成事务提交。否则，协调者发送回滚请求给所有参与者，回滚事务。

通过增加预提交阶段，在保证数据一致性的同时，解决了两阶段提交协议中协调者宕机导致的系统阻塞问题。但它仍然存在着阻塞、单点故障等问题

### NWR协议: 数据复制和一致性的协议
NWR协议是基于状态机复制（State Machine Replication）的思想。在分布式系统中，为了保证多个副本之间的数据一致性，常常需要使用复制技术来将数据复制到不同的节点上。状态机复制是其中一种常用的复制方法，它通过在每个节点上维护一个状态机来执行相同的操作序列，从而保证多个节点上的数据一致性。
1. N（Number of replicas）：表示系统中的副本数量。在NWR协议中，至少需要N个副本存储数据来保证数据的可用性和容错性。
2. W（Write quorum）：表示执行写操作所需的最小确认数。在NWR协议中，当一个客户端请求写入数据时，需要至少W个副本确认写操作成功后，才能认为写操作已经提交。
3. R（Read quorum）：表示执行读操作所需的最小确认数。在NWR协议中，当一个客户端请求读取数据时，需要至少R个副本返回相同的值后，才能认为读操作成功。

### Gossip协议,用于数据传播和数据同步的的随机化协议
1. 随机选择,每个节点在每一轮中随机选择若干个对等节点，并向它们发送自己持有的信息。
2. 信息交换：当两个节点相遇时，它们会交换彼此持有的信息，从而实现信息的传播和同步。
3. 基于概率的传播：在每一轮中，每个节点都以一定的概率选择与之通信的节点，从而保证信息能够在整个系统中进行传播。
Gossip协议在分布式系统中被广泛应用于数据同步、事件传播、状态更新等场景。它具有去中心化、容错性强、可扩展性好等优点，同时也能够有效地应对系统中的节点动态变化和网络分区等问题。因此，Gossip协议在构建大规模分布式系统和解决数据一致性等问题上具有重要意义。

需要指出的是，尽管Gossip协议具有许多优点，但也存在着一些挑战，例如信息传播的延迟、网络带宽的消耗等。因此，在实际应用中需要综合考虑系统的需求和特性，选择合适的信息传播策略和优化手段。

### 一致性协议paxos
1. Paxos协议的目标是在存在故障的分布式系统中达成一致的决策，即使系统中的一些节点可能发生错误或者消息丢失。Paxos协议通过引入一个称为"议会"的概念来实现一致性，其中包含多个节点，这些节点通过相互通信达成共识。
2. Paxos协议的基本思想是通过多个阶段的投票和提案来达成一致。在每个阶段，节点将根据特定规则进行投票，并根据投票结果进行提案。通过多轮的投票和提案，最终达成一致的决策。

### raft协议
Raft协议通过将分布式系统中的节点划分为领导者、跟随者和候选人三个角色，实现了高可用性和容错性。具体来说，Raft协议包括以下几个关键概念和机制：

1. 领导者选举：系统中的节点通过竞争成为领导者来负责处理客户端的请求，并协调其他节点。如果领导者失去联系或出现故障，其他节点会发起新一轮的选举过程选择新的领导者。
2. 日志复制：领导者负责接收客户端的写请求，并将这些请求以日志条目的形式追加到其本地日志中。然后，领导者会将这些日志条目发送给其他跟随者节点进行复制，从而保证所有节点上的数据一致性。
3. 安全性：Raft协议通过强一致性保证了数据的安全性。具体来说，在大多数节点正确工作的前提下，Raft协议能够保证数据的一致性和正确性。
4. 相对于其他共识算法，如Paxos，Raft协议提供了更清晰、更易理解的算法描述，使得开发者更容易实现和调试分布式系统。它在分布式数据库、分布式存储系统等领域得到了广泛应用，并成为了构建可靠分布式系统的重要基石。
5. 需要注意的是，Raft协议并不是适用于所有分布式系统的万金油解决方案。在实际应用中，还需要根据系统的需求和特点进行合理的选择和调整。
