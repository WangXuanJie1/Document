### 跨站脚本攻击XSS
跨站脚本攻击（Cross-Site Scripting，简称 XSS）是一种常见的Web安全漏洞，攻击者通过在网页中注入恶意脚本，使得这些脚本在用户浏览网页时自动执行，从而获取用户的敏感信息或控制用户的账户。XSS攻击可以分为反射型、存储型和DOM型三种类型。

#### 反射型XSS
反射型XSS攻击是指攻击者将恶意脚本注入到URL参数中，当用户访问包含恶意URL的网页时，代码被服务器识别并返回给浏览器，浏览器执行该脚本，从而导致攻击。
防御方法：对于输入的数据进行过滤或者使用编码函数对特殊字符进行转义。

#### 存储型XSS
存储型XSS是指攻击者将恶意脚本存储在服务端数据库中，当用户访问包含恶意脚本的页面时，服务器从数据库中读取脚本并返回给浏览器，浏览器执行该脚本，也会导致攻击。
防御方法：对于输入的数据进行过滤或者限制输入长度，同时在输出时对特殊字符进行转义。

#### DOM型XSS
DOM型XSS攻击是指攻击者利用JavaScript的DOM操作修改页面内容，从而实现攻击。这种攻击方式不需要向服务器发送请求，直接在浏览器中执行注入的脚本。
防御方法：对于输入的数据进行过滤或者限制输入长度，并使用安全的API操作DOM。
1. 对输入的数据进行过滤或者限制输入长度。
2. 使用编码函数对特殊字符进行转义。
3. 在输出时对特殊字符进行转义。
4. 使用HTTPOnly和Secure标志来加强Cookie安全性。
5. 使用内容安全策略（Content Security Policy，CSP）来限制网页中可执行的脚本内容。
6. 尽量避免使用eval等易受攻击的函数。
7. 对于用户输入的敏感信息，需进行合适的加密和安全存储。

### 窃取cookie
1. 攻击者在目标网站中注入恶意脚本，通常是通过输入表单、评论等方式，将恶意脚本提交到服务器。
2. 当用户访问该网站时，恶意脚本会被服务器返回并在用户浏览器中执行。
3. 恶意脚本会利用Document.cookie对象获取用户的cookie信息，并将其发送到攻击者的服务器或者存储在恶意脚本中，攻击者就可以获取到用户的cookie信息。
4. 攻击者使用窃取到的cookie信息进行身份验证或者其他恶意行为，如伪造用户身份、篡改用户数据等。

### CSRF（Cross-site request forgery）攻击，也称为"跨站请求伪造"，是一种常见的Web应用程序安全漏洞。攻击者通过在受害人浏览器上执行未经授权的操作，从而实现对受害人账户的攻击。
1. 攻击者在其控制的网站中构造一个恶意链接或表单，并包含对目标网站的请求，如修改密码、转账等操作。
2. 攻击者将恶意链接或表单发送给受害人，并诱骗其点击链接或提交表单。
3. 受害人点击链接或提交表单时，浏览器会自动发送请求到目标网站，这个请求中包含了受害人的cookie信息。
4. 目标网站验证cookie信息后认为这个请求是合法的，并执行相应操作，导致受害人账户被攻击。

### CSRF攻击，跨站请求为伪造
1. 验证HTTP Referer头：在目标网站中验证HTTP Referer头，只接受来自本站或者其他可信站点的请求。
2. 添加随机Token：在每个请求中添加一个随机的Token，并在后台进行验证，以确保请求是由合法用户发出的。
3. 使用验证码：在需要进行敏感操作时，使用验证码来防止机器人和脚本的攻击。
4. 不使用GET请求：不使用GET请求进行敏感操作，因为GET请求会被浏览器缓存，容易被攻击者利用。
5. 安全设置Cookie：在设置cookie时，使用HttpOnly和Secure属性，以防止攻击者窃取cookie信息。

### url跳转拦截
1. URL跳转漏洞是一种安全漏洞，也称为开放重定向漏洞。它通常出现在Web应用程序中，攻击者利用这个漏洞来欺骗用户访问恶意网站或者进行钓鱼攻击。
2. URL跳转漏洞通常发生在Web应用程序中提供了一个参数用于接收跳转目标URL的情况下。攻击者可以构造一个恶意的URL，将其伪装成合法的URL，并诱使用户点击。当用户点击这个恶意URL时，会被重定向到攻击者控制的恶意网站，从而可能导致信息泄露、恶意软件感染等安全问题。
3. URL跳转漏洞通常需要结合社会工程学手段，通过伪装成合法网站或者欺骗用户的方式来实施攻击。攻击者可能会伪装成信任的网站或者服务，诱使用户点击恶意URL，从而达到攻击的目的。
4. 防范URL跳转漏洞，Web应用程序开发者应该对接收URL跳转参数的地方进行严格的输入验证和过滤，确保跳转目标URL的合法性。同时，用户在点击URL链接时应当注意验证链接的真实性，避免轻易点击未知来源或可疑的链接。

### session劫持
1. session认证是一种常见的用户身份验证机制，用于在Web应用程序中跟踪和管理用户的会话状态。当用户登录后，应用程序会为其分配一个唯一的会话标识符（session ID），并将该会话ID存储在服务器端或客户端的cookie中。在后续用户请求中，会通过会话ID验证用户的身份。
2. 会话劫持（Session Hijacking）：攻击者通过窃取合法用户的会话ID，可以冒充用户的身份进行恶意操作。这种攻击可以通过网络嗅探、跨站脚本（XSS）等方式实施。为了减少会话劫持的风险，开发者可以使用HTTPS来加密会话数据，在传输过程中保护会话ID的安全性。
3. 会话固定（Session Fixation）：攻击者通过将自己生成的会话ID强制注入到目标用户的会话中，从而控制用户的会话。这种攻击常见于未正确管理会话ID的应用程序中。开发者可以采取措施，如在用户登录时重新生成会话ID，以防止会话固定攻击。
4. 会话窃听（Session Eavesdropping）：攻击者通过监听网络流量或使用网络嗅探工具来截获会话ID，并据此获取用户的会话信息。为了防止会话窃听，应使用HTTPS协议对会话数据进行加密传输。
5. 跨站请求伪造（CSRF）：攻击者利用用户在其他网站上已认证的会话来伪造请求，向目标网站发送恶意请求。为了防止CSRF攻击，开发者可以采取措施，如使用随机化令牌（CSRF Token）验证请求的合法性。

### ORM注入： ORM（Object-Relational Mapping）注入是一种针对使用ORM框架的应用程序的攻击方式。
攻击者通过在应用程序中构造恶意的对象查询语言（OQL）或对象关系查询语言（ORQL）来修改、删除或泄露数据库中的数据。为了防范ORM注入，开发者应遵循以下建议：
使用ORM框架提供的参数化查询或预编译语句。
对用户输入进行合法性验证和过滤，包括使用白名单或正则表达式来限制输入的类型和格式。
最小化数据库账户的权限，避免在应用程序中使用具有高权限的数据库账户。
定期更新和修补应用程序的安全漏洞，保持软件版本的最新状态。

### XML注入： XML注入是一种针对使用XML解析器的应用程序的攻击方式。
攻击者通过在应用程序中构造恶意的XML文件或请求，利用解析器对XML实体引用的处理不当，从而执行未授权的操作或泄露敏感信息。为了防范XML注入，开发者应遵循以下建议：
使用安全的XML解析器，确保对实体引用进行适当的处理或禁用实体解析。
对用户输入进行合法性验证和过滤，确保输入的XML数据是有效且符合预期的。
最小化解析器的权限，避免在应用程序中使用具有高权限的解析器。
定期更新和修补应用程序的安全漏洞，保持软件版本的最新状态。

### 文件上传漏洞
1. 文件上传漏洞是一种常见的Web应用程序安全漏洞，攻击者通过在应用程序中上传恶意的文件，从而执行未授权的操作或泄露敏感信息。以下是一些常见的文件上传漏洞攻击方式：

上传恶意脚本文件：攻击者上传包含恶意脚本代码的文件，如PHP、ASP等脚本语言文件。一旦被执行，这些恶意脚本可以执行各种操作，如修改、删除、泄露网站数据等。

上传Web Shell：攻击者上传包含Web Shell的文件，Web Shell是一种特殊的脚本文件，它可以提供命令行界面，允许攻击者执行系统命令、上传和下载文件等操作。

上传恶意PDF或图片文件：攻击者可以在PDF或图片文件中嵌入恶意脚本代码，一旦被打开，这些恶意脚本就会被执行。

为了防范文件上传漏洞，开发者可以采取以下措施：

对上传的文件类型进行严格的限制，只允许上传必要的文件类型，如图片、文档等。

对上传的文件进行验证和过滤，确保文件内容符合预期，避免包含恶意代码。

将上传的文件存储在非Web可访问的目录中，避免直接下载或执行上传的文件。

对上传的文件进行重命名，避免文件名包含敏感信息或特殊字符。

定期更新和修补应用程序的安全漏洞，保持软件版本的最新状态。

加强访问控制，限制未授权用户的上传权限。

对上传的文件进行杀毒检测或其他安全检测，确保上传的文件不包含病毒或恶意代码。

### DDOS拒绝服务
DDoS（分布式拒绝服务）攻击是一种网络攻击方式，攻击者通过控制大量已被感染的计算机（也称为“僵尸网络”），向目标服务器发送大量的请求，从而导致服务器无法正常处理请求。这种攻击方式可以使得目标服务器变得非常缓慢或完全失效，影响网站的正常运行和用户的访问体验。
UDP Flood：攻击者向目标服务器发送大量的UDP数据包，耗尽服务器的带宽、CPU和内存资源。
SYN Flood：攻击者向目标服务器发送大量的TCP SYN数据包，使得服务器不断地响应SYN请求，从而占用服务器的连接资源。
ICMP Flood：攻击者向目标服务器发送大量的 ICMP Echo请求，耗尽服务器的带宽和处理能力。
为了防范DDoS攻击，可以采取以下措施：
加强网络安全和访问控制，防止黑客入侵并控制大量计算机进行攻击。
部署专业的防火墙和入侵检测系统，及时发现和阻止攻击流量。
配置合适的负载均衡和容灾备份机制，确保即使遭受攻击，也能够保证服务的可用性。
限制访问速率和连接数，避免有大量无效请求对服务器造成影响。
使用CDN（内容分发网络）等服务，将流量分散到不同的节点上，减轻目标服务器的压力。
定期进行安全漏洞检查和修补，避免被黑客利用已知漏洞进行攻击。
总之，DDoS攻击是一种危险的网络安全威胁，对于网站管理员来说，应该采取多种措施防范此类攻击，确保正常的服务运行和用户体验。

### 文件上传漏洞
1. 上传的web脚本，检查上传文件的扩展名，检查白名单
2. 上传文件不是http无法访问的。如果是访问的需要上传到跨域名存储，目录是不可以执行的
3. 上传文件名是系统生成的
4. 图片存储是压缩，添加水印才能存储到服务器
5. 上传文件添加日志

### 文件下载和目录浏览漏洞
1. 下载的文件地址存储到数据库中
2. 下载权限，记录下载日志，将目录流览关闭，不开启目录遍历服务

### 访问控制
1. 通过过滤器

### 功能权限和数据权限是权限管理中的两个重要概念。

功能权限：功能权限是指用户在系统或应用程序中执行不同功能或操作的权限。它决定了用户可以使用系统中的哪些功能和执行哪些操作。例如，管理员可能有权限添加、删除和修改用户信息，而普通用户只能查看自己的信息或进行基本的数据查询和编辑操作。功能权限可以根据用户的角色或职位进行分配，以满足不同用户在系统中的工作需求。

数据权限：数据权限是指用户对系统或应用程序中数据的访问和操作权限。它决定了用户可以访问和操作哪些数据。例如，某个部门的用户可能只能访问和操作该部门相关的数据，而其他部门的数据对其来说是不可见的。数据权限可以根据用户的角色、职位或所属组织进行分配，以确保数据的安全性和隐私保护。

功能权限和数据权限是紧密相关的，两者相互配合来实现权限管理的完整性。功能权限决定了用户可以执行哪些功能和操作，而数据权限决定了用户可以访问和操作哪些数据。通过合理地设置功能权限和数据权限，可以实现对系统或应用程序的精细化控制，确保用户在工作中只能执行其职责范围内的功能和数据操作，提高系统的安全性和可用性。
需要注意的是，功能权限和数据权限的设置应根据实际需求和安全性考虑，并且在权限管理中定期进行审查和更新，以适应组织或系统的变化。

### DDOS攻击，分布式拒绝服务
DDoS（分布式拒绝服务攻击）工具是一种用于发动分布式拒绝服务攻击的软件或程序。这些工具可以通过利用大量的计算机或设备，向目标服务器或网络发送大量的请求，导致目标系统无法正常提供服务，甚至导致系统崩溃。
DDoS工具通常利用了网络中的漏洞或弱点，通过控制大量的僵尸计算机、物联网设备或其他网络连接设备，将它们组织起来形成一个庞大的网络，然后集中对目标系统进行攻击。
这些工具可以利用各种协议和技术，包括但不限于TCP、UDP、ICMP等，以及HTTP流量等，从而使目标系统的网络带宽、计算资源、存储资源等受到严重影响，无法正常提供服务。
在许多国家，使用DDoS工具进行攻击是非法的，因为它可能对目标系统造成严重的损害，甚至会导致经济损失和安全风险。因此，使用DDoS工具进行攻击是被严厉打击和追究法律责任的行为。

### CC攻击
CC攻击是指“HTTP Flood”攻击，也称为“CC攻击”（CC即Concentrated Attack的缩写），它是一种通过发送大量的HTTP请求来淹没服务器，使服务器超载或瘫痪的攻击方式。
在CC攻击中，攻击者利用自动化程序或工具，向目标服务器发送大量的HTTP请求，这些请求看似正常，但实际上是攻击者精心构造的。由于服务器需要处理大量的请求，可能会导致服务器资源耗尽，无法正常响应合法用户的请求，从而使得服务质量下降甚至完全不可用。
为了对抗CC攻击，通常需要使用防火墙、入侵检测系统（IDS）、入侵防御系统（IPS）等安全设备来过滤恶意流量，同时优化服务器配置以提高抗压能力。另外，CDN（内容分发网络）等技术也可以帮助分担服务器的压力，减轻CC攻击带来的影响。

### CC攻击防护
使用DDoS防护设备：部署专门的DDoS防护设备或服务，这些设备能够识别和过滤恶意流量，确保合法流量可以正常访问服务器。
配置Web应用防火墙（WAF）：WAF可以检测HTTP请求中的异常行为，并对恶意请求进行拦截和过滤，从而保护Web服务器免受CC攻击的影响。
使用反向代理：通过使用反向代理服务器，将客户端的请求分发到多台后端服务器上，从而分散了攻击的影响，提高了服务器的承载能力。
加强服务器硬件和网络设备：优化服务器配置，包括增加带宽、升级硬件设备等，以提升服务器的抗压能力。
限制并发连接数：通过配置服务器或负载均衡器，限制单个IP地址或来源的并发连接数，避免被同一个源IP发起大量连接。
IP封锁和黑名单：及时发现并记录攻击者的IP地址，将其加入黑名单并封锁，防止其继续发动攻击。
实时监控和自动化响应：监控流量并实时分析，当检测到异常流量时能够自动触发相应的防护策略，快速应对攻击。

### ip黑白名单
1. 使用微服务的过滤器实现，触发一定的策略就触发黑白名单。一定时间可以放出来
2. 使用openResty和Kong框架来实现
3. 使用nginx+lua脚本来实现对用户进行限流+ip黑名单

