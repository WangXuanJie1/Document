## 基本操作
1. 创建索引：put /demo_list?pretty
2. 删除: delete/demo_list?pretty
3. 创建文档：put /book/_doc/1  
4. 查询文档: get/book/_doc/1
5. 修改文档：put/book/_doc/1   标记为删除文档，全局
6. 修改局部信息文档： post /book/_update/1
7. 删除文档请求：delete/book/_doc/1

## document文档默认自带字段解析
1. 类似的数据存储到索引表中，类似数据存储在一个表中
2. _id：唯一索引

## 生成文档id
1. 手动生辰id，原本有id的情况下
2. 自动生成id，id是GUID生成的，分布式不冲突，长度是20字符
3. _source字段，原始字段，使用get/book/_doc/1?_source_includes=name可以获取到某一个数据
5. 文档的替换和删除： 全量替换 put（version会增加）   前置创建（不会替换原有文档） put/book/_doc/id/_create         删除：只是标记为删除，为了不影响现有的操作。延迟删除
6. 局部更新：post/index/_doc/id/_update    优点，减少网络请求次数，

## 使用脚本更新
1. 内置脚本：grovy脚本，消耗呢哦村
2. 外部脚本：脚本性能低下

## es并发问题
1. 高并发下面，多个一起修改就会出现问题。后果插入数据没有问题，修改数据int类型的时候可能会出现问题
2. 悲观锁：mysql select forupdate，就是在上锁，只有一个数据操作数据
3. 乐观锁：没有锁的概念，使用版本控制，修改的时候

## es主从是异步多线程的：  es内部主从同步也是基于版本号的，如果版本太低就会将数据丢弃

零停机重建索引
1. 一个field设置是不能修改的，如果要修改需要创建新的mapping，建立一个index，将数据批量查询出来重新写入index中
2. 数据查询的时候，使用scroll api，使用多线程的方式来reindex数据，每次scoll就查询指定日期的一段数据，交给一个线程
3. 



